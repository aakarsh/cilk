# 変数

ここでは，ローカル変数の基本的な使い方について説明します．

**実はまだグローバル変数が使えません!**

## ローカル変数の定義

ビルダーを使って符号付32bit整数のローカル変数を定義します．
``alloca``命令がスタック領域を確保します．

```rs
let i = builder.build_alloca(Type::Int32);
```

マクロならこう書けます．

```rs
i = alloca i32;
```

## ストアとロード

先ほど定義した変数に``1``を代入して，読みだしてみます．

```rs
builder.build_store(Value::new_imm_int32(42), i);
let load_i = builder.build_load(i);
```

これで``load_i``には``42``という数値が入っているはずです．JITなどで確認してもいいでしょう．

マクロだとこうです．

```rs
store (i32 42), (%i);
load_i = load (%i);
```

## マクロでの型表現

マクロを使うと ``i = alloca i32`` のように変数を確保できますが，
少し複雑な型名はこのままでは扱うことができません．

例えば，まだ配列の紹介をしていませんが，``i = alloca_ ([16; i32])`` のように ``alloca_``を使う必要があります．
(これはproc-macroで新しくマクロを作り直せば解決できる問題です．)

## 次のページ

次のページでは [四則演算](./3-四則演算.md)について見ていきます．
